@using ReviewProj.Models;
@model ReviewProj.Models.Enterprise
@{
    ViewBag.Title = "Index";
}

<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Institution Details</title>
    <link rel="stylesheet" href="http://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
    <link href="~/Content/styles.css" rel="stylesheet" />
    <link href="~/Content/ratingStyle.css" rel="stylesheet" />
</head>
<body>
    <br>
    <div id="padding-style" class="row">
        <div class="medium-6 columns">
            
            @if (Model.Resources != null)
            {
                int  i = 0;
                bool hasClosedPhotosBlock = false;

                foreach (Resource res in Model.Resources)
                {
                    string imgSrc = getImageSrcFromResource(res);
                    if (i == 0)
                    {
                        <img class="thumbnail" src=imageSrc />
                    } else
                    {
                        if(i % 4 == 1)
                        {
                            <div class="row small-up-4">
                        }

                        <div class="column">
                            <img class="thumbnail" src=@imgSrc">
                        </div>

                        if(i % 4 == 0) {
                            </div>
                            hasClosedPhotosBlock = true;
                        }  
                    }

                    ++i;
                }

                @if(i > 1 && !hasClosedPhotosBlock) {
                     </div>
                }
            }



            <div class="row small-up-4">
                <div class="column">
                    <img class="thumbnail" src="http://placehold.it/250x200">
                </div>
                <div class="column">
                    <img class="thumbnail" src="http://placehold.it/250x200">
                </div>
                <div class="column">
                    <img class="thumbnail" src="http://placehold.it/250x200">
                </div>
                <div class="column">
                    <img class="thumbnail" src="http://placehold.it/250x200">
                </div>
            </div>

        </div>
        <div class="medium-6 large-5 columns">
            <h3>@Model.Name</h3>
            <p>@Model.Description.</p>
        </div>
        <div class="column row">
            <hr>
            <div class="tabs-content" data-tabs-content="example-tabs">
                <div class="tabs-panel is-active" id="panel1">
                    <h4>Reviews</h4>
                    <div class="media-object stack-for-small">
                        <div class="media-object-section">
                            <img class="thumbnail" src="https://urplaneta.ru/img/avatar_placeholder_sq.png" alt="https://urplaneta.ru/img/avatar_placeholder_sq.png" height="100" width="100">
                        </div>
                        <div class="media-object-section">
                            <div class="rate">
                                <input type="radio" id="star5" name="rate" value="5" checked="1" />
                                <label for="star5" title="text">5 stars</label>
                                <input type="radio" id="star4" name="rate" value="4"/>
                                <label for="star4" title="text">4 stars</label>
                                <input type="radio" id="star3" name="rate" value="3"/>
                                <label for="star3" title="text">3 stars</label>
                                <input type="radio" id="star2" name="rate" value="2" />
                                <label for="star2" title="text">2 stars</label>
                                <input type="radio" id="star1" name="rate" value="1" />
                                <label for="star1" title="text">1 star</label>
                            </div>
                            <br />
                            <h5>Mike Stevenson</h5>
                            <p>I'm going to improvise. Listen, there's something you should know about me... about inception. An idea is like a virus, resilient, highly contagious. The smallest seed of an idea can grow. It can grow to define or destroy you.</p>
                        </div>
                    </div>
                    <div class="media-object stack-for-small">
                        <div class="media-object-section">
                            <img class="thumbnail" src="https://pp.userapi.com/c629405/v629405258/39399/nqDM15H_pWw.jpg" alt="https://urplaneta.ru/img/avatar_placeholder_sq.png" height="100" width="100">
                        </div>
                        <div class="media-object-section">
                            <h5>Mike Stevenson</h5>
                            <p>I'm going to improvise. Listen, there's something you should know about me... about inception. An idea is like a virus, resilient, highly contagious. The smallest seed of an idea can grow. It can grow to define or destroy you. I'm going to improvise. Listen, there's something you should know about me... about inception. An idea is like a virus, resilient, highly contagious. The smallest seed of an idea can grow. It can grow to define or destroy you.</p>
                        </div>
                    </div>
                </div>
                <label>
                    My Review
                    <textarea placeholder="Please type in your review"></textarea>
                </label>


                <button class="button">Submit Review</button>
            </div>
        </div>
    </div>

</body>
</html>

@functions{
    public string getImageSrcFromResource(Resource res)
    {
        try
                {
            string base64 = Convert.ToBase64String(res.Data);
            string imgSrc = String.Format("data:image/{0};base64,{1}", res.Format, base64);
            return imgSrc;
        }

        catch
        {
            return "~/Content/images/no_image_available.png";
        }
    }
}